// This Pine Script™ code is subject to the terms of the Mozilla Public License 2.0 at https://mozilla.org/MPL/2.0/
// © Tenstays

//@version=5
indicator("quantizer", overlay=true)
//+----------------------------------------------------------------------------------------------------------+
// --- program settings
int signal_line_width = 3
color signal_line_color = #000000


// --- global variables
float asset_steps = switch syminfo.ticker
    "NAS100" => float(20) / 1
    "NAS100USD" => float(20) / 1


// --- program function definitions
percentage(size)=>
    asset_steps / float(size)


quantize_signals(signal, direction, size=4, option=2)=>
    float results = signal
    float percentage = percentage(size)
    float percentage_qaurter = percentage(size * option)
    float min = signal - (signal % percentage)
    float max = min + percentage
    if direction == 1
        results := max
        if (signal - min) < percentage_qaurter
            results := min
    else if direction == -1
        results := min
        if (max - signal) < percentage_qaurter
            results := max
    results
